<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>MDN WebDoc 표준과 Virtual DOM</title>
</head>

<body>

	<!-- 커스텀 엘리먼트 + 쉐도우 돔 + 슬롯 (또는 template) 을 이용하여 커스텀 컴포넌트를 작성합니다. -->
	<accordion-wrap></accordion-wrap>



	<script>
		class AccordionWrap extends HTMLElement {
			constructor() {
				super();

				//생성자의 일부로 사용자 정의 요소에 Shadow Dom을 연결하는 경우
				const shadow = this.attachShadow({
					mode: 'open'
				});

				//엘리먼트 생성
				const dls = document.createElement('dl');
				const dts = document.createElement('dt');
				dts.setAttribute('onclick', 'accorAction()');

				dts.innerText = `제목`;
				const dds = document.createElement('dd');
				dds.innerText = `내용 내용`;
				//스타일 생성
				const style = document.createElement('style');
				style.textContent = `
* {margin:0;padding:0;box-sizing: border-box;}
dl {
	width:400px;
	border: 1px solid #ddd;
}
dt {
	padding: 10px;
	font-weight: 700;
	cursor:pointer;
}
dd {
	// display: none;
	padding: 10px;
	border-top: 1px dashed #ddd;
}
				`;

				//DOM append
				shadow.appendChild(style);
				shadow.appendChild(dls);
				dls.appendChild(dts);
				dls.appendChild(dds);
			}

			connectedCallback() {
				accorAction(this);
			}
		}

		customElements.define('accordion-wrap', AccordionWrap);



		//아코디언
		function accorAction() {
			//alert('hi');
			const shadow = this.shadowRoot;
			const nextDd = shadow.querySelector('dd');
			//const nextDd = this.nextElementSibling;
			console.log(nextDd);

			if (nextDd.style.display == 'block') {
				console.log('a');
				nextDd.style.display == 'none';
			} else {
				console.log('b');
				nextDd.style.display == 'block';
			}

		}
	</script>

</body>

</html>

<!-- https://developer.mozilla.org/ko/docs/Web/Web_Components/Using_custom_elements -->
<!-- https://googlechromelabs.github.io/howto-components/howto-accordion/ -->